# Teacher Tools - ä»£ç æ¶æ„åˆ†ææŠ¥å‘Š

## ğŸ“Š é¡¹ç›®æ¦‚è§ˆ

**é¡¹ç›®åç§°**: æ•™å¸ˆå·¥å…· (Teacher Tools)
**æŠ€æœ¯æ ˆ**: Flutter + Dart + SQLite + Provider
**å½“å‰ç‰ˆæœ¬**: 1.0.0+1
**æ•°æ®åº“ç‰ˆæœ¬**: 4
**ä»£ç è§„æ¨¡**:
- æ€»æ–‡ä»¶æ•°: 35ä¸ªDartæ–‡ä»¶
- æ€»ä»£ç é‡: ~4,000è¡Œ
- é¡¹ç›®å¤§å°: 368KB

---

## ğŸ—ï¸ æ•´ä½“æ¶æ„è®¾è®¡

### æ¶æ„æ¨¡å¼

æœ¬é¡¹ç›®é‡‡ç”¨ **ç»å…¸çš„ä¸‰å±‚æ¶æ„ + MVVMæ¨¡å¼**ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   UI Layer                         â”‚
â”‚  (Screens + Widgets + Routes)                      â”‚
â”‚  - Material Design 3                                â”‚
â”‚  - å“åº”å¼å¸ƒå±€                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ Provider (çŠ¶æ€ç®¡ç†)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Business Logic Layer                  â”‚
â”‚  (Providers + Utils + Services)                     â”‚
â”‚  - çŠ¶æ€ç®¡ç† (Provider)                              â”‚
â”‚  - ä¸šåŠ¡é€»è¾‘                                          â”‚
â”‚  - æ•°æ®è½¬æ¢                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                Data Layer                          â”‚
â”‚  (Models + DAOs + Database)                         â”‚
â”‚  - SQLite (sqflite)                                  â”‚
â”‚  - æ•°æ®è®¿é—®å¯¹è±¡ (DAO Pattern)                        â”‚
â”‚  - æ•°æ®æ¨¡å‹                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è®¾è®¡åŸåˆ™

1. **å•ä¸€èŒè´£åŸåˆ™ (SRP)**: æ¯ä¸ªç±»åªè´Ÿè´£ä¸€ä¸ªåŠŸèƒ½
2. **ä¾èµ–å€’ç½®åŸåˆ™ (DIP)**: é«˜å±‚æ¨¡å—ä¸ä¾èµ–ä½å±‚æ¨¡å—
3. **å¼€é—­åŸåˆ™ (OCP)**: å¯¹æ‰©å±•å¼€æ”¾ï¼Œå¯¹ä¿®æ”¹å…³é—­
4. **æ¥å£éš”ç¦»åŸåˆ™ (ISP)**: å®¢æˆ·ç«¯ä¸åº”ä¾èµ–å®ƒä¸éœ€è¦çš„æ¥å£

---

## ğŸ“ ç›®å½•ç»“æ„è¯¦è§£

```
lib/
â”œâ”€â”€ main.dart                      # åº”ç”¨å…¥å£
â”‚
â”œâ”€â”€ models/                        # ã€æ•°æ®æ¨¡å‹å±‚ã€‘6ä¸ªæ–‡ä»¶
â”‚   â”œâ”€â”€ student.dart              # å­¦ç”Ÿæ¨¡å‹
â”‚   â”œâ”€â”€ class_model.dart          # ç­çº§æ¨¡å‹
â”‚   â”œâ”€â”€ note.dart                 # ç¬”è®°æ¨¡å‹
â”‚   â”œâ”€â”€ exam.dart                 # è€ƒè¯•æ¨¡å‹
â”‚   â”œâ”€â”€ score.dart                # æˆç»©æ¨¡å‹
â”‚   â””â”€â”€ personality_trait.dart    # æ€§æ ¼ç‰¹è´¨æ¨¡å‹
â”‚
â”œâ”€â”€ database/                      # ã€æ•°æ®è®¿é—®å±‚ã€‘6ä¸ªæ–‡ä»¶
â”‚   â”œâ”€â”€ database_helper.dart      # æ•°æ®åº“ç®¡ç†å™¨
â”‚   â”œâ”€â”€ student_dao.dart          # å­¦ç”ŸDAO
â”‚   â”œâ”€â”€ class_dao.dart            # ç­çº§DAO
â”‚   â”œâ”€â”€ note_dao.dart             # ç¬”è®°DAO
â”‚   â”œâ”€â”€ exam_dao.dart             # è€ƒè¯•DAO
â”‚   â””â”€â”€ score_dao.dart            # æˆç»©DAO
â”‚
â”œâ”€â”€ providers/                     # ã€çŠ¶æ€ç®¡ç†å±‚ã€‘4ä¸ªæ–‡ä»¶
â”‚   â”œâ”€â”€ app_provider.dart         # åº”ç”¨å…¨å±€çŠ¶æ€
â”‚   â”œâ”€â”€ student_provider.dart     # å­¦ç”Ÿä¸šåŠ¡é€»è¾‘
â”‚   â”œâ”€â”€ note_provider.dart        # ç¬”è®°ä¸šåŠ¡é€»è¾‘
â”‚   â””â”€â”€ exam_provider.dart        # è€ƒè¯•ä¸šåŠ¡é€»è¾‘
â”‚
â”œâ”€â”€ screens/                       # ã€ç•Œé¢å±‚ã€‘12ä¸ªæ–‡ä»¶
â”‚   â”œâ”€â”€ home/                     # ä¸»é¡µ
â”‚   â”‚   â””â”€â”€ home_screen.dart
â”‚   â”œâ”€â”€ onboarding/               # å¼•å¯¼é¡µ
â”‚   â”‚   â”œâ”€â”€ welcome_screen.dart
â”‚   â”‚   â””â”€â”€ create_class_screen.dart
â”‚   â”œâ”€â”€ class/                    # ç­çº§ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ class_list_screen.dart
â”‚   â”‚   â””â”€â”€ class_detail_screen.dart
â”‚   â”œâ”€â”€ student/                  # å­¦ç”Ÿç®¡ç†
â”‚   â”‚   â”œâ”€â”€ student_list_screen.dart
â”‚   â”‚   â””â”€â”€ student_detail_screen.dart
â”‚   â”œâ”€â”€ note/                     # ç¬”è®°ç®¡ç†
â”‚   â”‚   â””â”€â”€ note_create_screen.dart
â”‚   â”œâ”€â”€ exam/                     # è€ƒè¯•ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ exam_list_screen.dart
â”‚   â”‚   â”œâ”€â”€ exam_create_screen.dart
â”‚   â”‚   â””â”€â”€ exam_detail_screen.dart
â”‚   â””â”€â”€ settings/                 # è®¾ç½®
â”‚       â””â”€â”€ settings_screen.dart
â”‚
â”œâ”€â”€ widgets/                       # ã€å¯å¤ç”¨ç»„ä»¶ã€‘4ä¸ªæ–‡ä»¶
â”‚   â”œâ”€â”€ personality_slider.dart   # æ€§æ ¼æ»‘å—
â”‚   â”œâ”€â”€ personality_form.dart     # æ€§æ ¼è¡¨å•
â”‚   â”œâ”€â”€ personality_radar_chart.dart  # æ€§æ ¼é›·è¾¾å›¾
â”‚   â””â”€â”€ personality_display_card.dart  # æ€§æ ¼å±•ç¤ºå¡ç‰‡
â”‚
â”œâ”€â”€ utils/                         # ã€å·¥å…·ç±»ã€‘2ä¸ªæ–‡ä»¶
â”‚   â”œâ”€â”€ constants.dart            # å¸¸é‡å®šä¹‰
â”‚   â””â”€â”€ excel_importer.dart       # Excelå¯¼å…¥å·¥å…·
â”‚
â””â”€â”€ routes/                        # ã€è·¯ç”±é…ç½®ã€‘(ç©ºç›®å½•)
    â””â”€â”€ (è·¯ç”±æš‚æœªä½¿ç”¨ï¼Œé‡‡ç”¨å‘½åå¯¼èˆª)
```

---

## ğŸ”§ æ ¸å¿ƒæŠ€æœ¯æ¶æ„

### 1. æ•°æ®å±‚ (Data Layer)

#### 1.1 æ•°æ®åº“è®¾è®¡ (SQLite + sqflite)

**è®¾è®¡ç‰¹ç‚¹**:
- ä½¿ç”¨å•ä¾‹æ¨¡å¼çš„ `DatabaseHelper`
- æ”¯æŒ Schema ç‰ˆæœ¬ç®¡ç†å’Œè¿ç§»
- é‡‡ç”¨ DAO (Data Access Object) æ¨¡å¼

**æ•°æ®åº“è¡¨ç»“æ„**:
```sql
-- ç‰ˆæœ¬4
classes          -- ç­çº§è¡¨
students         -- å­¦ç”Ÿè¡¨ (å«æ€§æ ¼ç‰¹è´¨)
notes            -- ç¬”è®°è¡¨
exams            -- è€ƒè¯•è¡¨
scores           -- æˆç»©è¡¨

-- ç´¢å¼•ä¼˜åŒ–
idx_students_class
idx_students_number
idx_notes_student
idx_notes_class
idx_exams_class
...
```

**Schemaå‡çº§ç­–ç•¥**:
- ç‰ˆæœ¬æ§åˆ¶: `AppConstants.databaseVersion = 4`
- å‡çº§è·¯å¾„: `_onUpgrade(Database db, int oldVersion, int newVersion)`
- æ•°æ®è¿ç§»: å¹³æ»‘å‡çº§ï¼Œå‘åå…¼å®¹

#### 1.2 DAOæ¨¡å¼ (Data Access Object)

**èŒè´£**: å°è£…æ‰€æœ‰æ•°æ®åº“æ“ä½œï¼Œæä¾›ç±»å‹å®‰å…¨çš„API

**ç¤ºä¾‹ - StudentDAO**:
```dart
class StudentDAO {
  final DatabaseHelper _db = DatabaseHelper.instance;

  // CRUDæ“ä½œ
  Future<int> insert(Student student);
  Future<int> update(Student student);
  Future<int> delete(int id);
  Future<int> softDelete(int id);

  // æŸ¥è¯¢æ“ä½œ
  Future<Student?> getById(int id);
  Future<List<Student>> getByClassId(int classId);
  Future<List<Student>> search(int classId, String keyword);
  Future<List<Student>> filterByGender(int classId, String gender);

  // ä¸šåŠ¡æŸ¥è¯¢
  Future<bool> isStudentNumberExists(int classId, String studentNumber);
  Future<int> getCount(int classId);
}
```

**ä¼˜ç‚¹**:
- âœ… æ•°æ®è®¿é—®é€»è¾‘é›†ä¸­ç®¡ç†
- âœ… ä¾¿äºå•å…ƒæµ‹è¯•ï¼ˆå¯mock DAOï¼‰
- âœ… éš”ç¦»æ•°æ®åº“å˜åŒ–å¯¹ä¸Šå±‚çš„å½±å“

#### 1.3 æ•°æ®æ¨¡å‹ (Models)

**è®¾è®¡ç‰¹ç‚¹**:
- ä¸å¯å˜å¯¹è±¡ (immutable)
- ä½¿ç”¨ `copyWith` å®ç°å¯¹è±¡å¤åˆ¶
- æä¾› `fromMap` / `toMap` ç”¨äºåºåˆ—åŒ–
- æ”¯æŒJSONæ ¼å¼çš„å¤æ‚å­—æ®µ

**ç¤ºä¾‹ - Studentæ¨¡å‹**:
```dart
class Student {
  final int? id;
  final int classId;
  final String name;
  final String studentNumber;
  final Gender gender;  // æšä¸¾ç±»å‹
  final List<PersonalityTrait>? personalityTraits;  // JSONå­—æ®µ
  ...

  // å·¥å‚æ–¹æ³•
  factory Student.fromMap(Map<String, dynamic> map);

  // åºåˆ—åŒ–
  Map<String, dynamic> toMap();

  // å¤åˆ¶
  Student copyWith({...});

  // è®¡ç®—å±æ€§
  int? get age;
  String get genderText;
  bool get hasPosition;
}
```

**æšä¸¾å®šä¹‰** (åœ¨ constants.dart):
```dart
enum Gender { male('male', 'ç”·'), female('female', 'å¥³'), unknown('unknown', 'æœªçŸ¥') }
enum Subject { math('math', 'æ•°å­¦'), chinese('chinese', 'è¯­æ–‡'), ... }
enum ExamType { midTerm('mid_term', 'æœŸä¸­è€ƒè¯•'), ... }
enum NoteType { performance('performance', 'è¯¾å ‚è¡¨ç°'), ... }
```

---

### 2. ä¸šåŠ¡é€»è¾‘å±‚ (Business Logic Layer)

#### 2.1 çŠ¶æ€ç®¡ç† (Provider Pattern)

**æ ¸å¿ƒæ€æƒ³**: ä½¿ç”¨Provider + ChangeNotifierå®ç°å“åº”å¼çŠ¶æ€ç®¡ç†

**Provideræ¶æ„**:
```
AppProvider (å…¨å±€åº”ç”¨çŠ¶æ€)
  â”œâ”€â”€ ç­çº§ç®¡ç†
  â”œâ”€â”€ å¼•å¯¼çŠ¶æ€
  â””â”€â”€ å½“å‰ç­çº§åˆ‡æ¢

StudentProvider (å­¦ç”Ÿä¸šåŠ¡é€»è¾‘)
  â”œâ”€â”€ å­¦ç”ŸCRUD
  â”œâ”€â”€ æœç´¢/ç­›é€‰
  â”œâ”€â”€ æ‰¹é‡å¯¼å…¥
  â””â”€â”€ Excelè§£æ

NoteProvider (ç¬”è®°ä¸šåŠ¡é€»è¾‘)
  â””â”€â”€ ç¬”è®°CRUD

ExamProvider (è€ƒè¯•ä¸šåŠ¡é€»è¾‘)
  â””â”€â”€ è€ƒè¯•/æˆç»©ç®¡ç†
```

**ç¤ºä¾‹ - StudentProvider**:
```dart
class StudentProvider with ChangeNotifier {
  final StudentDAO _studentDAO = StudentDAO();

  // çŠ¶æ€
  List<Student> _students = [];
  bool _isLoading = false;

  // è®¡ç®—å±æ€§
  List<Student> get filteredStudents => _filterStudents();

  // ä¸šåŠ¡æ–¹æ³•
  Future<void> loadStudents(int classId);
  Future<bool> addStudent(Student student);
  Future<int> addStudentsBatch(List<Student> students);
  Future<bool> updateStudent(Student student);
  Future<bool> deleteStudent(int id);
  Future<Map<String, dynamic>> importStudentsFromExcel(int classId);

  // æŸ¥è¯¢æ–¹æ³•
  void setSearchKeyword(String keyword);
  void setGenderFilter(String? gender);
  void clearFilters();
}
```

**æ•°æ®æµå‘**:
```
UI (Screen)
  â†’ Provider (ä¸šåŠ¡é€»è¾‘)
  â†’ DAO (æ•°æ®è®¿é—®)
  â†’ Database (SQLite)
```

#### 2.2 å·¥å…·ç±» (Utils)

**å¸¸é‡å®šä¹‰** (constants.dart):
```dart
class AppConstants {
  static const String databaseName = 'teacher_tools.db';
  static const int databaseVersion = 4;
  static const String keyOnboardingComplete = 'onboarding_complete';
  static const String keyCurrentClassId = 'current_class_id';
}
```

**Excelå¯¼å…¥å·¥å…·** (excel_importer.dart):
```dart
class ExcelImporter {
  // æ–‡ä»¶é€‰æ‹©
  static Future<File?> pickExcelFile();

  // æ–‡ä»¶è§£æ
  static Future<List<Map<String, dynamic>>?> parseExcelFile(File file);

  // æ•°æ®å¯¼å…¥
  static Future<List<Map<String, dynamic>>> importStudentsFromExcel();

  // æ¨¡æ¿ç”Ÿæˆ
  static Future<void> generateSampleExcel();

  // è¾…åŠ©æ–¹æ³•
  static String _parseGender(dynamic genderValue);
  static double? _parseDouble(dynamic value);
  static DateTime? _parseBirthDateFromIdCard(String? idCardNumber);
}
```

---

### 3. ç•Œé¢å±‚ (UI Layer)

#### 3.1 å±å¹•ç»„ç»‡ (Screens)

**æŒ‰åŠŸèƒ½æ¨¡å—åˆ’åˆ†**:
```
screens/
â”œâ”€â”€ home/              # ä¸»é¡µï¼ˆåŠŸèƒ½å¯¼èˆªä¸­å¿ƒï¼‰
â”œâ”€â”€ onboarding/        # å¼•å¯¼æµç¨‹
â”œâ”€â”€ class/             # ç­çº§ç®¡ç†
â”œâ”€â”€ student/           # å­¦ç”Ÿç®¡ç†
â”œâ”€â”€ note/              # ç¬”è®°ç®¡ç†
â”œâ”€â”€ exam/              # è€ƒè¯•ç®¡ç†
â””â”€â”€ settings/          # è®¾ç½®
```

**å‘½åè§„èŒƒ**: `{åŠŸèƒ½}_{ç±»å‹}_screen.dart`

**ç¤ºä¾‹**: `student_detail_screen.dart`

#### 3.2 å¯å¤ç”¨ç»„ä»¶ (Widgets)

**å½“å‰ç»„ä»¶**:
```dart
PersonalitySlider          // å•ä¸ªæ€§æ ¼ç»´åº¦æ»‘å—
PersonalityForm            // æ€§æ ¼è®¾ç½®è¡¨å•ï¼ˆ6ä¸ªæ»‘å—ï¼‰
PersonalityRadarChart      // æ€§æ ¼é›·è¾¾å›¾
PersonalityDisplayCard    // æ€§æ ¼å±•ç¤ºå¡ç‰‡ï¼ˆé›†æˆç»„ä»¶ï¼‰
```

**ç»„ä»¶è®¾è®¡åŸåˆ™**:
- âœ… å•ä¸€èŒè´£
- âœ… å¯é…ç½®ï¼ˆå‚æ•°åŒ–ï¼‰
- âœ… æ— çŠ¶æ€ä¼˜å…ˆï¼ˆStatelessWidgetï¼‰
- âœ… ç»„åˆä¼˜äºç»§æ‰¿

**ç¤ºä¾‹ - PersonalitySlider**:
```dart
class PersonalitySlider extends StatelessWidget {
  final String dimension;           // ç»´åº¦åç§°
  final String negativeLabel;       // è´Ÿå‘æ ‡ç­¾
  final String positiveLabel;       // æ­£å‘æ ‡ç­¾
  final int value;                  // å½“å‰å€¼
  final Function(int) onChanged;    // å€¼å˜åŒ–å›è°ƒ
  final bool enabled;               // æ˜¯å¦å¯ç”¨

  @override
  Widget build(BuildContext context) {
    return Slider(...);  // åŒå‘æ»‘å—
  }
}
```

#### 3.3 UIè®¾è®¡ç³»ç»Ÿ

**ä¸»é¢˜é…ç½®** (main.dart):
```dart
// æµ…è‰²ä¸»é¢˜
MaterialDesign 3
ColorScheme: fromSeed(seedColor: #2196F3)  // è“è‰²ä¸»è°ƒ
ScaffoldBackground: #F5F5F5

// æ·±è‰²ä¸»é¢˜
MaterialDesign 3
ColorScheme: fromSeed(seedColor: #2196F3)
ScaffoldBackground: #121212

// è·Ÿéšç³»ç»Ÿ
ThemeMode.system
```

**Material 3ç‰¹æ€§**:
- ä½¿ç”¨ `useMaterial3: true`
- åœ†è§’è®¾è®¡ (BorderRadius.circular(8))
- ElevatedButtonæ–°æ ·å¼
- Cardç»„ä»¶æ–°è®¾è®¡

---

## ğŸ”„ æ•°æ®æµå‘åˆ†æ

### å®Œæ•´æ•°æ®æµç¤ºä¾‹ï¼šæ·»åŠ å­¦ç”Ÿ

```
1. ç”¨æˆ·æ“ä½œ
   â””â”€> StudentListScreen._showAddStudentDialog()

2. UIè¾“å…¥
   â””â”€> Form + TextFieldæ”¶é›†æ•°æ®

3. æäº¤åˆ°Provider
   â””â”€> StudentProvider.addStudent(student)
       â”‚
       â”œâ”€> éªŒè¯æ•°æ®ï¼ˆå­¦å·é‡å¤æ£€æŸ¥ï¼‰
       â”œâ”€> StudentDAO.insert(student)
       â”‚     â”‚
       â”‚     â””â”€> DatabaseHelper.insert('students', student.toMap())
       â”‚           â”‚
       â”‚           â””â”€> SQLite: INSERT INTO students ...
       â”‚
       â”œâ”€> æ›´æ–°æœ¬åœ°çŠ¶æ€ _students.add()
       â””â”€> notifyListeners() é€šçŸ¥UI

4. UIè‡ªåŠ¨åˆ·æ–°
   â””â”€> Consumer<StudentProvider> rebuild
       â””â”€> æ˜¾ç¤ºæ–°æ·»åŠ çš„å­¦ç”Ÿ
```

### è·¨å±‚æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Screen    â”‚  UIå±‚ - ç”¨æˆ·ç•Œé¢
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Provider.of<StudentProvider>
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Provider      â”‚  ä¸šåŠ¡å±‚ - çŠ¶æ€ç®¡ç†
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ _studentDAO.insert()
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   StudentDAO    â”‚  æ•°æ®å±‚ - DAOæ¨¡å¼
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ _db.insert('students', ...)
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ DatabaseHelper â”‚  æ•°æ®åº“è®¿é—®å±‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ sqflite: INSERT INTO ...
â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   SQLite DB     â”‚  æŒä¹…åŒ–å­˜å‚¨
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ¨ è®¾è®¡æ¨¡å¼åº”ç”¨

### 1. DAOæ¨¡å¼ (Data Access Object)
- **ä½ç½®**: `database/` ç›®å½•
- **ä½œç”¨**: å°è£…æ•°æ®è®¿é—®é€»è¾‘
- **ä¼˜ç‚¹**: è§£è€¦æ•°æ®å±‚ä¸ä¸šåŠ¡å±‚

### 2. Provideræ¨¡å¼ (çŠ¶æ€ç®¡ç†)
- **ä½ç½®**: `providers/` ç›®å½•
- **ä½œç”¨**: ç®¡ç†åº”ç”¨çŠ¶æ€å’Œä¸šåŠ¡é€»è¾‘
- **ä¼˜ç‚¹**: å“åº”å¼ç¼–ç¨‹ï¼Œè‡ªåŠ¨æ›´æ–°UI

### 3. å•ä¾‹æ¨¡å¼ (Singleton)
- **ä½ç½®**: `DatabaseHelper.instance`
- **ä½œç”¨**: å…¨å±€å”¯ä¸€çš„æ•°æ®åº“å®ä¾‹
- **ä¼˜ç‚¹**: èŠ‚çœèµ„æºï¼Œé¿å…è¿æ¥å†²çª

### 4. å·¥å‚æ¨¡å¼ (Factory)
- **ä½ç½®**: æ¨¡å‹çš„ `fromMap` / `fromJson`
- **ä½œç”¨**: å¯¹è±¡åˆ›å»ºå’Œåºåˆ—åŒ–
- **ä¼˜ç‚¹**: ç»Ÿä¸€å¯¹è±¡åˆ›å»ºé€»è¾‘

### 5. è§‚å¯Ÿè€…æ¨¡å¼ (Observer)
- **ä½ç½®**: ChangeNotifier + Consumer
- **ä½œç”¨**: çŠ¶æ€å˜åŒ–è‡ªåŠ¨é€šçŸ¥è®¢é˜…è€…
- **ä¼˜ç‚¹**: è§£è€¦UIå’Œä¸šåŠ¡é€»è¾‘

### 6. ç­–ç•¥æ¨¡å¼ (Strategy)
- **ä½ç½®**: æšä¸¾ç±»å‹ï¼ˆGender, Subjectç­‰ï¼‰
- **ä½œç”¨**: å®šä¹‰ç®—æ³•æ—ï¼ˆæ€§åˆ«å¤„ç†ã€ç§‘ç›®å¤„ç†ï¼‰
- **ä¼˜ç‚¹**: æ˜“äºæ‰©å±•æ–°çš„ç±»å‹

---

## ğŸ’ª æ¶æ„ä¼˜åŠ¿

### âœ… ä¼˜ç‚¹

1. **åˆ†å±‚æ¸…æ™°**
   - UIã€ä¸šåŠ¡ã€æ•°æ®ä¸‰å±‚åˆ†ç¦»
   - èŒè´£æ˜ç¡®ï¼Œæ˜“äºç»´æŠ¤

2. **å¯æµ‹è¯•æ€§å¼º**
   - æ¯å±‚ç‹¬ç«‹ï¼Œä¾¿äºmock
   - Providerå¯å•ç‹¬æµ‹è¯•
   - DAOå¯è¿›è¡Œæ•°æ®åº“å•å…ƒæµ‹è¯•

3. **å¯æ‰©å±•æ€§å¥½**
   - æ–°å¢åŠŸèƒ½åªéœ€æ·»åŠ å¯¹åº”çš„Modelã€DAOã€Providerã€Screen
   - ç»„ä»¶åŒ–è®¾è®¡ï¼Œå¤ç”¨æ€§é«˜

4. **ç±»å‹å®‰å…¨**
   - Dartå¼ºç±»å‹ç³»ç»Ÿ
   - ç¼–è¯‘æœŸé”™è¯¯æ£€æŸ¥
   - ç©ºå®‰å…¨æ”¯æŒ

5. **å“åº”å¼è®¾è®¡**
   - Providerè‡ªåŠ¨æ›´æ–°UI
   - ç”¨æˆ·æ“ä½œå³æ—¶åé¦ˆ

6. **æ•°æ®æŒä¹…åŒ–**
   - SQLiteæœ¬åœ°å­˜å‚¨
   - æ— ç½‘ç»œä¾èµ–
   - è®¿é—®é€Ÿåº¦å¿«

### âš ï¸ æ½œåœ¨æ”¹è¿›ç‚¹

1. **è·¯ç”±ç®¡ç†**
   - å½“å‰ä½¿ç”¨å‘½åå¯¼èˆª
   - å»ºè®®å¼•å…¥ go_routerï¼ˆå·²åœ¨pubspec.yamlä¸­ï¼‰
   - å¯å®ç°æ·±é“¾æ¥å’ŒWebæ”¯æŒ

2. **ä¾èµ–æ³¨å…¥**
   - å½“å‰Provideråœ¨main.dartä¸­ç¡¬ç¼–ç åˆ›å»º
   - å¯è€ƒè™‘ä½¿ç”¨ get_it æˆ– injectable

3. **é”™è¯¯å¤„ç†**
   - ç¼ºå°‘å…¨å±€é”™è¯¯å¤„ç†æœºåˆ¶
   - å»ºè®®æ·»åŠ ç»Ÿä¸€çš„é”™è¯¯æŠ¥å‘Šå’Œæ—¥å¿—

4. **çŠ¶æ€ç®¡ç†å¤æ‚åº¦**
   - Provideré€‚åˆä¸­å°å‹åº”ç”¨
   - å¦‚çŠ¶æ€å¤æ‚ï¼Œå¯è€ƒè™‘ Riverpod æˆ– Bloc

5. **æµ‹è¯•è¦†ç›–**
   - ç¼ºå°‘å•å…ƒæµ‹è¯•
   - å»ºè®®æ·»åŠ  widgetã€unitã€integration æµ‹è¯•

---

## ğŸ“Š ä»£ç è´¨é‡æŒ‡æ ‡

### æ¨¡å—åŒ–ç¨‹åº¦
- âœ… æŒ‰åŠŸèƒ½åˆ†å±‚ï¼ˆmodels/database/providers/screens/widgets/utilsï¼‰
- âœ… æ¯ä¸ªæ¨¡å—èŒè´£å•ä¸€
- âœ… æ–‡ä»¶å‘½åè§„èŒƒç»Ÿä¸€

### ä»£ç å¤ç”¨æ€§
- âœ… é€šç”¨ç»„ä»¶æŠ½å–ï¼ˆwidgets/ï¼‰
- âœ… å·¥å…·ç±»å°è£…ï¼ˆutils/ï¼‰
- âœ… æšä¸¾å®šä¹‰å¤ç”¨ï¼ˆconstants.dartï¼‰

### å¯ç»´æŠ¤æ€§
- âœ… ä»£ç æ³¨é‡Šæ¸…æ™°
- âœ… å‘½åè§„èŒƒï¼ˆé©¼å³°ã€ä¸‹åˆ’çº¿ï¼‰
- âœ… æ–‡ä»¶ç»“æ„åˆç†

### æ€§èƒ½
- âœ… SQLiteç´¢å¼•ä¼˜åŒ–
- âœ… ProvideræŒ‰éœ€æ›´æ–°ï¼ˆnotifyListenersï¼‰
- âœ… ListViewæ‡’åŠ è½½

---

## ğŸš€ æŠ€æœ¯æ ˆæ€»ç»“

### æ ¸å¿ƒæ¡†æ¶
| æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|
| Flutter | 3.9.2+ | UIæ¡†æ¶ |
| Dart | 3.9.2+ | ç¼–ç¨‹è¯­è¨€ |
| sqflite | 2.3.0+ | SQLiteæ•°æ®åº“ |
| provider | 6.1.2+ | çŠ¶æ€ç®¡ç† |
| shared_preferences | 2.2.3+ | æœ¬åœ°å­˜å‚¨ |
| excel | 4.0.3+ | Excelå¯¼å…¥ |
| fl_chart | 0.66.2+ | å›¾è¡¨ç»˜åˆ¶ |
| file_picker | 8.1.6+ | æ–‡ä»¶é€‰æ‹© |
| go_router | 14.6.2+ | è·¯ç”±ç®¡ç†ï¼ˆå·²å¼•å…¥æœªä½¿ç”¨ï¼‰|

### å¼€å‘å·¥å…·
| å·¥å…· | ç”¨é€” |
|------|------|
| flutter_lints | ä»£ç è§„èŒƒæ£€æŸ¥ |
| Material 3 | UIè®¾è®¡ç³»ç»Ÿ |

---

## ğŸ“ˆ æ‰©å±•æ€§è¯„ä¼°

### æ–°å¢åŠŸèƒ½æµç¨‹

ä»¥"æ·»åŠ è¯¾ç¨‹è¡¨åŠŸèƒ½"ä¸ºä¾‹ï¼š

```
1. æ•°æ®å±‚
   â”œâ”€> åˆ›å»º Course æ¨¡å‹ (models/course.dart)
   â”œâ”€> åˆ›å»º CourseDAO (database/course_dao.dart)
   â””â”€> å‡çº§æ•°æ®åº“ç‰ˆæœ¬ (4 â†’ 5)

2. ä¸šåŠ¡å±‚
   â””â”€> åˆ›å»º CourseProvider (providers/course_provider.dart)

3. UIå±‚
   â”œâ”€> åˆ›å»º CourseListScreen
   â”œâ”€> åˆ›å»º CourseDetailScreen
   â””â”€> åˆ›å»º CourseFormScreen

4. ç»„ä»¶å±‚
   â””â”€> å¯é€‰ï¼šåˆ›å»ºå¤ç”¨ç»„ä»¶ï¼ˆå¦‚è¯¾è¡¨å¡ç‰‡ï¼‰

5. è·¯ç”±
   â””â”€> æ·»åŠ åˆ°å¯¼èˆªé€»è¾‘

é¢„è®¡å·¥ä½œé‡ï¼š
- æ–°å¢æ–‡ä»¶: 5-7ä¸ª
- ä»£ç é‡: ~600-800è¡Œ
- æ—¶é—´: 1-2å¤©
```

### æ‰©å±•å»ºè®®

1. **çŸ­æœŸä¼˜åŒ–**
   - æ·»åŠ å•å…ƒæµ‹è¯•
   - å®Œå–„é”™è¯¯å¤„ç†
   - æ·»åŠ åŠ è½½çŠ¶æ€
   - å®ç°è·¯ç”±ç®¡ç†

2. **ä¸­æœŸåŠŸèƒ½**
   - äº‘ç«¯åŒæ­¥ï¼ˆFirebase/è‡ªå»ºåç«¯ï¼‰
   - æ•°æ®å¯¼å‡ºï¼ˆPDF/Excelï¼‰
   - æ¶ˆæ¯æ¨é€
   - æ•°æ®å¤‡ä»½æ¢å¤

3. **é•¿æœŸè§„åˆ’**
   - å¤šè®¾å¤‡åŒæ­¥
   - åä½œåŠŸèƒ½ï¼ˆå¤šä½è€å¸ˆå…±äº«ç­çº§ï¼‰
   - AIè¾…åŠ©åˆ†æï¼ˆå­¦ä¹ å»ºè®®ç”Ÿæˆï¼‰
   - å®¶é•¿ç«¯åº”ç”¨

---

## ğŸ¯ æ¶æ„è¯„åˆ†

| ç»´åº¦ | è¯„åˆ† | è¯´æ˜ |
|------|------|------|
| **åˆ†å±‚æ¸…æ™°åº¦** | 9.5/10 | ä¸‰å±‚æ¶æ„æ¸…æ™°ï¼ŒèŒè´£æ˜ç¡® |
| **ä»£ç å¯ç»´æŠ¤æ€§** | 9/10 | å‘½åè§„èŒƒï¼Œç»“æ„åˆç† |
| **å¯æ‰©å±•æ€§** | 9/10 | ç»„ä»¶åŒ–è®¾è®¡ï¼Œæ˜“äºæ‰©å±• |
| **å¯æµ‹è¯•æ€§** | 7/10 | æ¶æ„æ”¯æŒæµ‹è¯•ï¼Œä½†ç¼ºå°‘æµ‹è¯•ä»£ç  |
| **æ€§èƒ½è¡¨ç°** | 8.5/10 | æœ‰ç´¢å¼•ä¼˜åŒ–ï¼Œå“åº”è¿…é€Ÿ |
| **å®‰å…¨æ€§** | 8/10 | æœ¬åœ°å­˜å‚¨ï¼Œæ— ç½‘ç»œæš´éœ²é£é™© |

**ç»¼åˆè¯„åˆ†: 8.6/10** â­â­â­â­

---

## ğŸ“ æ€»ç»“

### æ¶æ„ç‰¹ç‚¹

è¿™æ˜¯ä¸€ä¸ª**è®¾è®¡ä¼˜ç§€ã€ç»“æ„æ¸…æ™°**çš„Flutteråº”ç”¨ï¼Œé‡‡ç”¨äº†ï¼š

1. âœ… **ç»å…¸ä¸‰å±‚æ¶æ„**: UIã€ä¸šåŠ¡ã€æ•°æ®åˆ†ç¦»
2. âœ… **DAOæ¨¡å¼**: æ•°æ®è®¿é—®å°è£…å®Œå–„
3. âœ… **ProviderçŠ¶æ€ç®¡ç†**: å“åº”å¼ç¼–ç¨‹
4. âœ… **Material Design 3**: ç°ä»£åŒ–UIè®¾è®¡
5. âœ… **ç»„ä»¶åŒ–å¼€å‘**: ä»£ç å¤ç”¨æ€§å¼º

### é€‚ç”¨åœºæ™¯

- âœ… ä¸­å°å‹æœ¬åœ°åº”ç”¨
- âœ… å•ç”¨æˆ·å·¥å…·ç±»åº”ç”¨
- âœ… æ•™è‚²ã€å·¥å…·ç±»Flutteråº”ç”¨å‚è€ƒ

### å­¦ä¹ ä»·å€¼

è¿™ä¸ªé¡¹ç›®æ¶æ„æ˜¯å­¦ä¹ Flutteråº”ç”¨å¼€å‘çš„**ä¼˜ç§€èŒƒä¾‹**ï¼Œç‰¹åˆ«æ˜¯ï¼š
- DAOæ¨¡å¼çš„åº”ç”¨
- ProviderçŠ¶æ€ç®¡ç†å®è·µ
- åˆ†å±‚æ¶æ„è®¾è®¡
- ç»„ä»¶å¤ç”¨æ€æƒ³

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-12-24
**é¡¹ç›®ç‰ˆæœ¬**: 1.0.0+1 (Database v4)
**åˆ†ææ–‡ä»¶æ•°**: 35ä¸ªDartæ–‡ä»¶
